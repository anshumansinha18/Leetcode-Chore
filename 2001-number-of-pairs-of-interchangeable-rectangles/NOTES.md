Don't use map<double, int> as double has limitations to its precision.
Use map<pair<int, int>, int> and gcd to keep the width and length in simplest form.
â€‹